gcloud container clusters create jenkins-devops  --zone europe-west1-b --num-nodes 2   --scopes "https://www.googleapis.com/auth/source.read_write,cloud-platform" 

tar zxfv helm-v3.6.0-linux-amd64.tar.gz
cp linux-amd64/helm .

kubectl create clusterrolebinding cluster-admin-binding --clusterrole=cluster-admin --user=$(gcloud config get-value account)

./helm repo add jenkinsci https://charts.jenkins.io
./helm repo update

rm jenkins/values.yaml
wget -P jenkins/ https://github.com/jenkinsci/helm-charts/blob/main/charts/jenkins/values.yaml

./helm install jenkins jenkinsci/jenkins --wait
kubectl get pods

export POD_NAME=$(kubectl get pods --namespace default -l "app.kubernetes.io/component=jenkins-master" -l "app.kubernetes.io/instance=jenkins" -o jsonpath="{.items[0].metadata.name}")
kubectl port-forward $POD_NAME 8080:8080 >> /dev/null &
kubectl get svc

printf $(kubectl get secret jenkins -o jsonpath="{.data.jenkins-admin-password}" | base64 --decode);echo





CONECTAR

export POD_NAME=$(kubectl get pods --namespace default -l "app.kubernetes.io/component=jenkins-master" -l "app.kubernetes.io/instance=jenkins" -o jsonpath="{.items[0].metadata.name}")
kubectl port-forward $POD_NAME 8080:8080 >> /dev/null &
kubectl get svc
